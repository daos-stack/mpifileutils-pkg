From 496e503244ec649c52e52c4f6d879b3059dcab0c Mon Sep 17 00:00:00 2001
From: Dalton Bohning <daltonx.bohning@intel.com>
Date: Wed, 30 Sep 2020 00:05:36 +0000
Subject: [PATCH] libmfu: add major, minor, patch version

Added the major, minor, and patch version
to the compiled libmfu.so

Signed-off-by: Dalton Bohning <daltonx.bohning@intel.com>
---
 src/common/CMakeLists.txt | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/common/CMakeLists.txt b/src/common/CMakeLists.txt
index 9bea346d..8e9a3856 100644
--- a/src/common/CMakeLists.txt
+++ b/src/common/CMakeLists.txt
@@ -1,3 +1,9 @@
+# Version for the shared mfu library
+set(MFU_VERSION_MAJOR 0)  # Incompatible API changes
+set(MFU_VERSION_MINOR 11) # Backwards-compatible functionality
+set(MFU_VERSION_PATCH 0)  # Backwards-compatible fixes
+set(MFU_VERSION ${MFU_VERSION_MAJOR}.${MFU_VERSION_MINOR}.${MFU_VERSION_PATCH})
+
 # todo re-asses if all of these must be *installed*
 LIST(APPEND libmfu_install_headers
   mfu.h
@@ -44,7 +50,7 @@ SET_TARGET_PROPERTIES(mfu_o PROPERTIES C_STANDARD 99)
 
 ADD_LIBRARY(mfu SHARED $<TARGET_OBJECTS:mfu_o>)
 TARGET_LINK_LIBRARIES(mfu LINK_PUBLIC ${MFU_EXTERNAL_LIBS})
-SET_TARGET_PROPERTIES(mfu PROPERTIES OUTPUT_NAME mfu CLEAN_DIRECT_OUTPUT 1)
+SET_TARGET_PROPERTIES(mfu PROPERTIES VERSION ${MFU_VERSION} OUTPUT_NAME mfu CLEAN_DIRECT_OUTPUT 1)
 INSTALL(TARGETS mfu DESTINATION ${CMAKE_INSTALL_LIBDIR})
 
 ADD_LIBRARY(mfu-static STATIC $<TARGET_OBJECTS:mfu_o>)
